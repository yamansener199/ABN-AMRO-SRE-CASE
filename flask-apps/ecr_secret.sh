#!/bin/bash
#USE THIS BASH SCRIPT FOR TESTING ON MINIKUBE FOR LATEST IMAGES PUSHED TO ECR REPO (FOR DEV PURPOSES)
export AWS_ACCOUNT="816731947491"
export AWS_REGION="eu-west-2"
export AWS_PROFILE="karavana"

aws ecr get-login-password --region eu-west-2 | kubectl create secret docker-registry ecr-secret \
--docker-server=816731947491.dkr.ecr.eu-west-2.amazonaws.com \
--docker-username=AWS \
--docker-password-stdin


kubectl create secret docker-registry regcred --docker-server=816731947491.dkr.ecr.eu-west-2.amazonaws.com --docker-username=AWS --docker-password=eyJwYXlsb2FkIjoiNFR5YVBrY0RZdStoZnFwdVMxclMyNDNBMjNJMVVxZVlXSk1Sb1FEOERGVk9oRU5kZndkd05ndjRXTUIxdFhvZWNJejkveE0vakxMK0RVSmxsU1RtVWVtRHpSOGMvRUJ5c3lPR0d6dTRFSWRvY1Q1cHI1K1c3OHE3Qm9ISGZaMTVLaDNEbmJzaFloMEd1QUFyZUlsTXVKQ3BEM0lNaGErZzhFOU1hNncyK0xoa2FCaE90ZHZuTUY5TTE5NVVTbXU4dHRVQkUzS1BLQU9zNU02OGdXNU9HL09TYzN4TGtBU0EzVzZqanozUUpjZkZuTUowM2ZuZ3ROaWtCblVpNkpHUHdmNE9Ta0VIL3E5aml3aG4yMWFUWU9IdXVPblhPOHZDR3QvMXBFeGltU2VvMnQ2aGh1YWJpc1BSQ250bUhvYkNiN1hVSFZDYmtsRlBVVzZQbmQ0WTVlWVpLVHRhZ2UrVGl3UUhSQkdaM3ZaejMrNjNpeXROSFpWa1RYa2pPWUMrSXVuNEJrSERRTSt0M2NNdHZ5bCthaXN3NUI3RU9iVDNlVzhGWE80dWhtZEY2NmoxZzJwU2JCVkhyanhIQk9SWUR1bHR0bDFndDMxMk04Q1gwVWYwWW1yVllSMmk5YWY5N21wM01IRmdONmpUVzJvZmJBTW81cVNjL25ScW5CbnF6ckV5QjlsUlZ1T25GQVpZbFRlRHNuQ0QreHcvVVo1MkxMYkJUc0FtVHdGdEQ4UVpXWXIwT3N0d1BBMTIzRXo4VTN1bkJzRmgvdlBPbFdoSldRT3RMalpLMTZFdGp2N0tPWll6U1M1UHFNMlU2T0JMaTAxN3RHL0VFV21WLzk0YWhPbGJ0YnEyNnE0MGJVazlMdk9PbEJMeUR6N1ZBMEh2OEorM09oTU8xTWJUTUVDZ25VZ2VmWlpPRWNEZmZkdzdNeis1Q1pUa1JmYkdqSmFaL1poN0l0YmIwbnJ1TjdwaG5uSHB1bFJaMDk0UmxEbytJOXZZZm9JNTBoenVjeXZqQ2d6dmtQSklTbGQvSGhTcnR5V01aeE1IYzh1MGlzSEh0V0Z6dUxzQ1ZnSW4zNWtrWDRKNWV0Qjk2cW5STE9PczUzdzJDMVB1UGt5RXBMWGtWZXlTN1VUdTFqcnNSQXFHcnFpeklXMTFWeGk3L1haK29WWi9rRE1uWGs5RVMzWU4wQ1FVU05PVnpXWHBIOHoyK3o1enVQSzlJTWFwYXFOcnlpZHF1di9rai9lNysxYThQdWFvL3EvaEY5TWIxd0pSd21adGIvd092cjJmdEltVHU0YnFLSWhEWW02anR1cGF5blZVdjdacWdOUE1Sd3VlM2RKeHkyRlJpd0Z6N3FpUWxxTFo1UXJ5VEhHWktMQkpjZz09IiwiZGF0YWtleSI6IkFRRUJBSGhORHpXVm5ZR3lsSzN0VWFsSEFOcG1yblF6YTV3NFc0Y0hZTVU4MnRiTkl3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRUROWkZrOG1laE1hVkd6SW5nUUlCRUlBN1RoSnZuK3ExZ1FRQjBDU0wzMmJyVmVva0p2RE80NFM4c0RjZjcxR2VpZ2R5MGhlYlR5VlFEWGF6U1UyMXdpdXMxdUdxU1dISWZ3cWxSeWs9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNzA5NTAyNTY4fQ== --docker-email=karavanaacom@gmail.com